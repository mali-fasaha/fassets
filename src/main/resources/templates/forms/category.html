<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<div th:replace="fragments/header :: header-css"/>

<body>

<div th:replace="fragments/header :: header"/>

<br>
<div class="container">

    <div class="heading">
        <h3>Categories</h3>
    </div>

    <br>

    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Add a New Category</h3>
        </div>
        <div class="panel-body">
            <!--/*@thymesVar id="category" type="io.github.fasset.fasset.model.FixedAssetCategory"*/-->
            <form class="form-inline" th:action="@{/categories}" th:object="${category}" method="post" action="#" >
                <div class="row">
                    <div class="form-group col-lg-3 col-md-3 col-sm-3">
                        <label for="name">Name:</label>
                        <input class="form-control" id="name" type="text" th:field="*{designation}">
                    </div>
                    <div class="form-group col-lg-3 col-md-3 col-sm-3">
                        <label for="rate">Depreciation Rate:</label>
                        <div class="input-group">
                            <input type="number" th:field="*{depreciationRate}" class="form-control text-right" id="rate" aria-label="Rate (as percentage)">
                            <span class="input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="form-group col-lg-3 col-md-3 col-sm-3">
                        <label for="regime">Depreciation Regime:</label>
                        <select type="text"  th:field="*{depreciationLogic}" class="form-control" id="regime">
                            <option value="straightLine">Straight Line</option>
                            <option value="decliningBalance">Declining Balance</option>
                        </select>
                    </div>
                    <div class="form-group col-lg-3 col-md-3 col-sm-3">
                        <label for="deprecant">Deprecant:</label>
                        <select type="text"  th:field="*{deprecant}" class="form-control" id="deprecant">
                            <option value="purchaseCost">Purchase Cost</option>
                            <option value="netBookValue">Net Book Value</option>
                        </select>
                    </div>
                </div>

                <br/>

                <div class="align-left">
                    <button type="submit" class="btn btn-default ">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <br>

    <div class="panel panel-primary">

        <div class="table-wrapper-2">
            <!-- Table -->
            <table class="table table-hover table-responsive">
                <thead class="blue-grey lighten-4">
                <tr>
                    <th>Category</th>
                    <th>Depreciation</th>
                    <th>Rate</th>
                </tr>
                </thead>
                <tbody>
                <tr  th:each="category : ${categories}">
                    <td th:text="${category.designation}" />
                    <td th:text="${category.depreciationLogic}" />
                    <td th:text="${category.depreciationRate}>30<span class="addon">%</span></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<div th:replace="fragments/footer :: footer"/>

<script>
    $(document).ready(function () {

        var $deprecant = $('#deprecant').find(':selected').text();

        $( "#regime" )
            .change(function () {
                var str = "";
                $( "select option:selected" ).each(function() {
                    str += $( this ).text() + " ";
                });

                if(str.localeCompare("straightLine")===0){
                    $('#deprecant').val("purchaseCost")
                } else{
                    $('#deprecant').val("netBookValue")
                }
            })
            .change();
    });
</script>

</body>
</html>